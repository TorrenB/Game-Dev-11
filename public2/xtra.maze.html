<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T4A04 Maze by Fred</title>
    <style>
        body {
            margin: 0;
            overflow: hidden; /* Prevent scrolling */
        }
    </style>
</head>

<body id="myBody"
    style="background-image: url('https://static-00.iconduck.com/assets.00/slightly-smiling-face-emoji-emoji-2048x2048-00r9o7wl.png'); 
           background-repeat: repeat; 
           background-size: 80%;"
    onload="myAuto()">

    <h1 align="center"><font color="red">T4A04 Maze by Fred</font></h1>

    <script>
        // Global variables
        let myGlobalX = 0;
        let myClock;
        let myGravity = 0.03;
        let myJump = -40; // Jump height
        let myHorizontalJump = 5; // Horizontal movement speed
        let myVertical;
        let myHorizontal;

        // Function to detect collisions
        function myHitOther(my1, my2) {
            let left1 = parseInt(document.getElementById(my1).style.left);
            let right1 = left1 + parseInt(document.getElementById(my1).style.width);
            let top1 = parseInt(document.getElementById(my1).style.top);
            let bottom1 = top1 + parseInt(document.getElementById(my1).style.height);
            let left2 = parseInt(document.getElementById(my2).style.left);
            let right2 = left2 + parseInt(document.getElementById(my2).style.width);
            let top2 = parseInt(document.getElementById(my2).style.top);
            let bottom2 = top2 + parseInt(document.getElementById(my2).style.height);
            return (right1 >= left2 && bottom1 >= top2 && left1 <= right2 && top1 <= bottom2);
        }

        // Function to simulate gravity and movement
        function myDoGravity() {
            myVertical = parseInt(document.getElementById('myImg01').style.top) + 2;
            myHorizontal = parseInt(document.getElementById('myImg01').style.left);
            document.getElementById('myImg01').style.left = myHorizontal + myHorizontalJump + 'px';
            document.getElementById('myImg01').style.top = myVertical + (myVertical * myGravity) + 'px';
        }

        // Auto-run functionality
        function myAuto() {
            clearInterval(myClock);
            myClock = setInterval(function () {
                myDoGravity();
                myCheckHit(); // checks for all collisions
            }, 100);
        }

        // Checking for hit/collisions
        function myCheckHit() {
            if (myHitOther('myImg01', 'myImg02')) {
                // Reset position if they collide
                document.getElementById('myImg01').style.left = 'calc(50% - 50px)'; // Reset to center
                document.getElementById('myImg01').style.top = 'calc(50% - 40px)'; // Reset to center
            }

            // Winning condition
            if (myHitOther('myImg01', 'myImg04')) {
                alert('You Win, now go to the next level');
                document.getElementById('myImg01').style.left = 'calc(50% - 50px)'; // Reset to center
                document.getElementById('myImg01').style.top = 'calc(50% - 40px)'; // Reset to center
                location = 'https://www.google.ca'; // Change to next level URL
            }
        }

        // Move the pencil image up on click
        document.body.onclick = function () {
            document.getElementById('myImg01').style.top = (parseInt(document.getElementById('myImg01').style.top) + myJump) + 'px';
            myDoGravity(); // Call gravity function after jump
        };
    </script>

    <input type="button" value="Left" onTouchStart="{this.click(); event.preventDefault();}" onclick="{
        document.getElementById('myImg01').style.left = parseInt(document.getElementById('myImg01').style.left) - 10 + 'px';
        myCheckHit(); // Check for collisions
    }">

    <input type="button" value="Right" onTouchStart="{this.click(); event.preventDefault();}" onclick="{
        document.getElementById('myImg01').style.left = parseInt(document.getElementById('myImg01').style.left) + 10 + 'px';
        myCheckHit(); // Check for collisions
    }">

    <br><br>

    <!-- Image of the pencil, centered on the screen -->
    <img id="myImg01"
        src="https://i5.walmartimages.com/asr/4db37e6d-93b0-42d2-9925-cdca9fc7acad_1.34acb5b84f421558552dcef4789f9b95.jpeg"
        style="position:absolute; width:100px; height:80px; left: calc(50% - 50px); top: calc(50% - 40px);">

    <img id="myImg02"
        src="https://th.bing.com/th/id/OIP.-zyMCsyMjgkO07hXLJzZcQHaHa?rs=1&pid=ImgDetMain"
        style="position:absolute; width:100px; height:80px; left:350px; top:90px;">

    <!-- Removed the empty images -->
    <!-- <img id="myImg03" src="myImgNew.jpg" style="position:absolute; width:200px; height:10px; left:500px; top:400px;"> -->
    <!-- <img id="myImg04" src="myImgNew.jpg" style="position:absolute; width:100px; height:80px; left:800px; top:400px;"> -->
</body>

</html>
